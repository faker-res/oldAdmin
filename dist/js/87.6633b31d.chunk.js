webpackJsonp([87],{1394:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i(t(144)),a=i(t(773));function i(n){return n&&n.__esModule?n:{default:n}}e.default={components:{SiteNameSelect:a.default},data:function(){return{levelTotal:0,checkAllLevelFlag:!1,AllSiteSelect:!1,SiteNameSelectData:{type:"多选",placeholder:"请输入站点名称",style:{width:"260px"}},levelData:{},levelIds:[],roleNameList:[],roleName:[],CreatAdminForm:{userName:"",password:"",status:"yes",siteId:[],createUserName:this.$root.adminuserinfo.adminUserName,levelId:"",updateUserName:this.$root.adminuserinfo.adminUserName,maxAddMoney:0},WebSiteList:[],Status:[{value:"yes",label:"开启"},{value:"no",label:"关闭"}],CreatAdminFormRules:{userName:[{required:!0,pattern:/^[A-Za-z0-9]{6,20}$/,message:"管理员用户名不能为空且必须6-20位字母数字组合！",trigger:"blur"}],siteId:[{required:!0,message:"站点名称不能为空！",trigger:"blur",type:"array"}],maxAddMoney:[{required:!0,message:"最大加款金额不能为空",trigger:"blur"}]}}},watch:{AllSiteSelect:function(n,e){this.allSiteSelectChange(n)},levelData:{handler:function(n,e){this.CreatAdminForm.levelId=this.createLevelIdParams()},deep:!0}},mounted:function(){var n=this;this.$nextTick(function(){n.$route.query&&n.$route.query.id&&n.$route.query.isVerify&&n.isVerifyFn(n.$route.query.id),n.getRoleList()})},methods:{allSiteSelectChange:function(n){var e=[];n?(this.CreatAdminForm.siteId=["0"],e=JSON.parse(localStorage.AllSiteNameList).map(function(n){return n.id})):(e=[],this.CreatAdminForm.siteId=[]),this.getLevelData(e),this.$refs.SiteNameSelect.setDefaultSite(e)},checkAllLevel:function(e){this.checkAllLevelFlag=e,this.levelData.forEach(function(n){n.checkAll=e,n.indeterminate=!1,n.list.forEach(function(n){n.checked=e})})},createLevelIdParams:function(){var e=this;return this.levelIds=[],this.levelData.forEach(function(n){n.list.forEach(function(n){n.checked&&e.levelIds.push(n.id)})}),this.levelIds.length===this.levelTotal?this.checkAllLevelFlag=!0:this.checkAllLevelFlag=!1,this.levelIds.toString()},checkAllFun:function(n){var e=this.levelData[n].checkAll;this.levelData[n].indeterminate=!1,this.levelData[n].list.forEach(function(n){n.checked=e})},checkOneFun:function(n){var e=0,t=this.levelData[n].list.length;this.levelData[n].list.forEach(function(n){n.checked&&e++}),0<e&&e<t&&(this.levelData[n].indeterminate=!0,this.levelData[n].checkAll=!1),0<e&&e===t&&(this.levelData[n].indeterminate=!1,this.levelData[n].checkAll=!0),0===e&&(this.levelData[n].indeterminate=!1,this.levelData[n].checkAll=!1)},getRoleList:function(){var e=this;this.$root.HTTP_ALLLINKGET(this.$root.HTTP_L.HTTP_GetRoleList).then(function(n){e.roleNameList=n.data.data})},isVerifyFn:function(n){var r=this;this.$root.HTTP_ALLLINKPOST(this.$root.HTTP_L.HTTP_GuanLiYuanZhangHaoXiangQing,{adminId:this.$route.query.id}).then(function(n){for(var e in r.CreatAdminForm)"siteId"!==e&&(r.CreatAdminForm[e]=n.data.data[e]);var t=n.data.data,a=t.rolesIds,i=t.siteId,l=t.levelId;r.roleName=a.roles_id.length?a.roles_id:[],r.$refs.SiteNameSelect.setDefaultSite(i.split(",").map(function(n){return+n})),r.CreatAdminForm.adminId=n.data.data.id,r.CreatAdminForm.updateUserName=r.$root.adminuserinfo.adminUserName,r.levelIds=l.split(","),"0"==n.data.data.siteId&&(r.AllSiteSelect=!0)})},siteChange:function(n){0===n.SiteId.length?this.CreatAdminForm.siteId=["0"]:(this.CreatAdminForm.siteId=n.SiteId,this.getLevelData(n.SiteId))},getLevelData:function(n){var e=this;n.length?this.$root.HTTP_ALLLINKPOST(this.$root.HTTP_L.HTTP_SiteIdHuoQuGongGongDengJi,{type:"MemberLevelModel",siteId:n}).then(function(n){e.levelData=e.buildData(n.data.data),e.$route.query.isVerify||e.checkAllLevel(!1)}):this.levelData=[]},buildData:function(a){var i=this,l=[];this.levelTotal=0;var n=function(n){var e={};e.siteName=a[n][0].siteName,i.$route.query.isVerify||(e.checkAll=!1,e.indeterminate=!1);var t=0;a[n].forEach(function(e){i.levelTotal++,i.$route.query.isVerify?i.levelIds.forEach(function(n){+e.id==+n&&(t++,e.checked=!0)}):e.checked=!1}),t===a[n].length&&(e.checkAll=!0,e.indeterminate=!1),0<t&&t<a[n].length&&(e.checkAll=!1,e.indeterminate=!0),0===t&&(e.checkAll=!1,e.indeterminate=!1),e.list=a[n],l.push(e)};for(var e in a)n(e);return l},CreatingAdmin:function(){var i=this;this.$refs.CreatAdminForm.validate(function(n){if(n){i.$root.loading();var e=void 0,a=(0,l.default)({},i.CreatAdminForm);a.siteId=a.siteId.toString(),a.maxAddMoney=+a.maxAddMoney,a.roleName=[],i.roleName.forEach(function(t){i.roleNameList.forEach(function(n){if(t==n.id){var e={};e[t]=n.name,a.roleName.push(e)}})}),i.$route.query.isVerify?(delete a.createUserName,a.password||delete a.password,e=i.$root.HTTP_L.HTTP_XiuGaiGuanLiYuan,i.$root.HTTP_ALLLINKPOST(e,a).then(function(n){i.$Spin.hide(),i.$Modal.success({title:"提示",content:"管理员修改成功！"})}).catch(function(n){i.$Spin.hide()})):(delete a.updateUserName,e=i.$root.HTTP_L.HTTP_XinJianGuanLiYuan,i.$root.HTTP_ALLLINKPOST(e,a).then(function(n){i.$Spin.hide(),i.$Modal.success({title:"提示",content:"管理员添加成功！"}),i.CreatAdminForm.userName="",i.$router.push({name:"AdminList"})}).catch(function(n){i.$Spin.hide()}))}})}}}},1646:function(n,e,t){var a=t(1647);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(75)("09d152dc",a,!1,{})},1647:function(n,e,t){(n.exports=t(74)(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},1648:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=t(145),l=(a=i)&&a.__esModule?a:{default:a};var r=function(){var a=this,n=a.$createElement,i=a._self._c||n;return i("div",{staticClass:"user_info"},[i("div",{staticClass:"layout"},[i("div",{staticClass:"page-header"},[i("h1",{staticClass:"binding"},[a._v(a._s(a.$route.meta.title))])]),a._v(" "),i("div",{staticClass:"page-con1"},[i("div",[i("Form",{ref:"CreatAdminForm",attrs:{model:a.CreatAdminForm,rules:a.CreatAdminFormRules,"label-width":210}},[i("FormItem",{attrs:{label:"创建人",prop:"createUserName"}},[i("i-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入管理员用户名",disabled:!0},model:{value:a.$root.adminuserinfo.adminUserName,callback:function(n){a.$set(a.$root.adminuserinfo,"adminUserName",n)},expression:"$root.adminuserinfo.adminUserName"}})],1),a._v(" "),i("FormItem",{attrs:{label:"管理员用户名",prop:"userName"}},[i("i-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入管理员用户名",disabled:!!a.$route.query.isVerify},model:{value:a.CreatAdminForm.userName,callback:function(n){a.$set(a.CreatAdminForm,"userName",n)},expression:"CreatAdminForm.userName"}})],1),a._v(" "),i("FormItem",{attrs:{label:a.$route.query.isVerify?"修改管理员密码":"管理员密码",prop:"password"}},[i("i-input",{staticStyle:{width:"260px"},attrs:{type:"password",placeholder:"请输入管理员密码"},model:{value:a.CreatAdminForm.password,callback:function(n){a.$set(a.CreatAdminForm,"password",n)},expression:"CreatAdminForm.password"}})],1),a._v(" "),i("FormItem",{attrs:{label:"管理员角色",prop:"roleName"}},[i("CheckboxGroup",{model:{value:a.roleName,callback:function(n){a.roleName=n},expression:"roleName"}},a._l(a.roleNameList,function(n,e){return i("Checkbox",{key:e,attrs:{label:n.id}},[a._v(a._s(n.title))])}),1)],1),a._v(" "),i("FormItem",{attrs:{label:"站点",prop:"siteId"}},[i("SiteNameSelect",{directives:[{name:"show",rawName:"v-show",value:!a.AllSiteSelect,expression:"!AllSiteSelect"}],ref:"SiteNameSelect",attrs:{SiteNameSelectData:a.SiteNameSelectData},on:{listenOnChange:a.siteChange}}),a._v(" "),"0"==a.$root.adminuserinfo.siteId?i("Checkbox",{model:{value:a.AllSiteSelect,callback:function(n){a.AllSiteSelect=n},expression:"AllSiteSelect"}},[a._v("全部站点")]):a._e()],1),a._v(" "),a.CreatAdminForm.siteId.length||a.AllSiteSelect?i("FormItem",{attrs:{label:"出入款允许操作的会员等级",prop:"levelId"}},[a._l(a.levelData,function(e,t){return i("div",{key:t},[i("span",{staticStyle:{display:"inline-block",width:"90px","font-size":"14px"}},[a._v(a._s(e.siteName)+"：")]),a._v(" "),i("Checkbox",{attrs:{indeterminate:e.indeterminate},on:{"on-change":function(n){a.checkAllFun(t)}},model:{value:e.checkAll,callback:function(n){a.$set(e,"checkAll",n)},expression:"level.checkAll"}},[a._v("全选")]),a._v(" "),a._l(e.list,function(e,n){return i("Checkbox",{key:n,on:{"on-change":function(n){a.checkOneFun(t)}},model:{value:e.checked,callback:function(n){a.$set(e,"checked",n)},expression:"li.checked"}},[a._v(a._s(e.levelName))])})],2)}),a._v(" "),2<=(0,l.default)(a.levelData).length?i("Checkbox",{on:{"on-change":a.checkAllLevel},model:{value:a.checkAllLevelFlag,callback:function(n){a.checkAllLevelFlag=n},expression:"checkAllLevelFlag"}},[a._v("勾选全部站点等级")]):a._e()],2):a._e(),a._v(" "),i("FormItem",{attrs:{label:"状态"}},[i("Select",{staticStyle:{width:"260px"},model:{value:a.CreatAdminForm.status,callback:function(n){a.$set(a.CreatAdminForm,"status",n)},expression:"CreatAdminForm.status"}},a._l(a.Status,function(n){return i("Option",{key:n.value,attrs:{value:n.value}},[a._v(a._s(n.label))])}),1)],1),a._v(" "),i("FormItem",{attrs:{label:"最大加款金额",prop:"maxAddMoney"}},[i("i-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入最大加款金额"},model:{value:a.CreatAdminForm.maxAddMoney,callback:function(n){a.$set(a.CreatAdminForm,"maxAddMoney",n)},expression:"CreatAdminForm.maxAddMoney"}})],1),a._v(" "),i("FormItem",[i("Button",{attrs:{loading:a.$root.btnLoading,type:"primary"},on:{click:a.CreatingAdmin}},[a._v("\n              确定\n              "),a.$route.query.isVerify?i("span",[a._v("修改")]):i("span",[a._v("创建")])]),a._v(" "),i("Button",{on:{click:function(n){a.$router.push({name:"AdminList"})}}},[a._v("管理员列表")]),a._v(" "),i("Button",{on:{click:a.$root.go_back}},[a._v("返回")])],1)],1)],1)])])])};r._withStripped=!0;var s={render:r,staticRenderFns:[]};e.default=s},711:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(1394),i=t.n(a);for(var l in a)"default"!==l&&function(n){t.d(e,n,function(){return a[n]})}(l);var r=t(1648),s=t.n(r),o=!1;var c=function(n){o||t(1646)},d=t(63)(i.a,s.a,!1,c,null,null);d.options.__file="src/template/CommonPage/AdminCreate.vue",e.default=d.exports},768:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i,l,r=c(t(144)),s=c(t(332)),o=c(t(333));function c(n){return n&&n.__esModule?n:{default:n}}e.default={props:["SiteNameSelectData"],data:function(){return{singleData:{SiteId:null},multipleData:{SiteId:[]},siteIdList:[]}},created:function(){var n=this;this.$nextTick(function(){n.getSiteList()})},watch:{"$root.AllSiteNameList":{handler:function(n,e){n&&(this.siteIdList=n,this.InitData())},deep:!0},singleData:{handler:function(n,e){this.singleChange(n)},deep:!0},multipleData:{handler:function(n,e){this.multipleChange(n)},deep:!0}},methods:{getSiteList:function(){localStorage.AllSiteNameList&&(this.siteIdList=JSON.parse(localStorage.AllSiteNameList),this.InitData())},setDefaultSite:(l=(0,o.default)(s.default.mark(function n(e){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"单选"==this.SiteNameSelectData.type?this.singleData.SiteId=e:this.multipleData.SiteId=e;case 1:case"end":return n.stop()}},n,this)})),function(n){return l.apply(this,arguments)}),InitData:(i=(0,o.default)(s.default.mark(function n(){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"单选"!=this.SiteNameSelectData.type||this.SiteNameSelectData.edit||(this.singleData.SiteId=this.siteIdList[0].id);case 1:case"end":return n.stop()}},n,this)})),function(){return i.apply(this,arguments)}),sendSiteList:(a=(0,o.default)(s.default.mark(function n(){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.siteIdList);case 1:case"end":return n.stop()}},n,this)})),function(){return a.apply(this,arguments)}),singleChange:function(e){var t=(0,r.default)({},this.singleData);this.siteIdList.forEach(function(n){n.id==e.SiteId&&(t.SiteName=n.siteName,t.paymentBonus=JSON.parse(n.siteConfig).limit.paymentBonus)}),this.$emit("listenOnChange",t)},multipleChange:function(n){var t=(0,r.default)({},this.multipleData);t.SiteName=[],this.siteIdList.forEach(function(e){t.SiteId&&t.SiteId.forEach(function(n){e.id==n&&t.SiteName.push(e.siteName)})}),this.$emit("listenOnChange",t)}}}},773:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(768),i=t.n(a);for(var l in a)"default"!==l&&function(n){t.d(e,n,function(){return a[n]})}(l);var r=t(777),s=t.n(r),o=!1;var c=function(n){o||t(775)},d=t(63)(i.a,s.a,!1,c,null,null);d.options.__file="src/template/my-components/SiteNameSelect.vue",e.default=d.exports},775:function(n,e,t){var a=t(776);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(75)("6e9b1005",a,!1,{})},776:function(n,e,t){(n.exports=t(74)(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},777:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",["单选"==e.SiteNameSelectData.type?t("Select",{style:e.SiteNameSelectData.style,attrs:{clearable:e.SiteNameSelectData.clearable,disabled:e.SiteNameSelectData.disabled,placeholder:e.SiteNameSelectData.placeholder},model:{value:e.singleData.SiteId,callback:function(n){e.$set(e.singleData,"SiteId",n)},expression:"singleData.SiteId"}},e._l(e.siteIdList,function(n){return t("Option",{key:n.id,attrs:{value:n.id}},[e._v(e._s(n.siteName))])}),1):t("Select",{style:e.SiteNameSelectData.style,attrs:{multiple:"",disabled:e.SiteNameSelectData.disabled,placeholder:e.SiteNameSelectData.placeholder},model:{value:e.multipleData.SiteId,callback:function(n){e.$set(e.multipleData,"SiteId",n)},expression:"multipleData.SiteId"}},e._l(e.siteIdList,function(n){return t("Option",{key:n.id,attrs:{value:n.id}},[e._v(e._s(n.siteName))])}),1)],1)};a._withStripped=!0;var i={render:a,staticRenderFns:[]};e.default=i}});